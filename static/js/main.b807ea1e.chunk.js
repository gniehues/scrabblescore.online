(window.webpackJsonpscrabble_react=window.webpackJsonpscrabble_react||[]).push([[0],{23:function(e,t,a){},24:function(e,t,a){},33:function(e,t,a){e.exports=a(58)},38:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},53:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),s=a(15),o=(a(38),a(2)),i=a(3),c=a(5),u=a(4),m=a(1),d=a(6),h=a(22),p=a(9),g=(a(23),a(19)),f={en:{language:"English",scores:{a:1,e:1,i:1,o:1,u:1,l:1,n:1,r:1,s:1,t:1,d:2,g:2,b:3,c:3,m:3,p:3,f:4,h:4,v:4,w:4,y:4,k:5,j:8,x:8,q:10,z:10}},fr:{language:"French",scores:{e:1,a:1,i:1,n:1,o:1,r:1,s:1,t:1,u:1,l:1,d:2,m:2,g:2,b:3,c:3,p:3,f:4,h:4,v:4,j:8,q:8,k:10,w:10,x:10,y:10,z:10}},ru:{language:"Russian",scores:{"\u043e":1,"\u0430":1,"\u0435":1,"\u0438":1,"\u043d":1,"\u0440":1,"\u0441":1,"\u0442":1,"\u0432":1,"\u0434":2,"\u043a":2,"\u043b":2,"\u043f":2,"\u0443":2,"\u043c":2,"\u0431":3,"\u0433":3,"\u044c":3,"\u044f":3,"\u0451":3,"\u044b":4,"\u0439":4,"\u0437":5,"\u0436":5,"\u0445":5,"\u0446":5,"\u0447":5,"\u0448":8,"\u044d":8,"\u044e":8,"\u0444":10,"\u0449":10,"\u044a":10}}};function b(e,t,a){for(var n=e.slice(0,t);n.length<t;)n.push(a);return n}function v(e,t){return 0===e.length?[t]:e[0]===t?[]:[t]}function y(e,t,a){var n=0;return e.split("").forEach(function(e,r){for(var l=f[a].scores[e.toLowerCase()],s=0;s<t[r].length;s++)switch(t[r][s]){case"blank":l*=0;break;case"double-letter":l*=2;break;case"triple-letter":l*=3}n+=l}),t.forEach(function(e){for(var t=0;t<e.length;t++)switch(e[t]){case"double-word":n*=2;break;case"triple-word":n*=3}}),n}function E(){return"ReactSnap"===navigator.userAgent}function O(e){var t=e.modifiers.map(function(e,t){return 0===e.length?null:"".concat(t,":").concat(e.join())}).filter(function(e){return!!e}).join(", ");return t?"".concat(e.value," (").concat(t,")"):e.value}function N(e){var t,a=function(t){if(t.isPassed(e))return"PASS";var a=t.words.map(function(e){return e.value}).join("+");return t.bingo?"".concat(a," BINGO"):a},r=e.playersTurns.map(function(e){return e.map(a).join(",")}),l=e.playersTurns.map(function(t,a){return e.getTotalScore(a)}),s=e.playersTurns[0].length-1,o=(new Date).getTime();return{turns:r,scores:l,numTurns:s,durationMins:n?(t=o-n,Math.floor(t/6e4)):void 0}}function w(e,t){if(!E())try{g.a.getInstance().logEvent(e,t)}catch(a){console.log("Something went wrong when logging an event. ".concat(a,"."))}}function k(){document.getElementsByTagName("body")[0].scrollIntoView(!0)}function j(){document.getElementsByClassName("middle-scroll-anchor")[0].scrollIntoView({block:"center"})}function S(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function C(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}function T(e){window.localStorage.removeItem(e)}var P=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("img",{id:"big-logo",src:"logo.png",alt:"Scrabble score logo"}),l.a.createElement("p",null,"Scra Score Sheet keeps track of the game, and replaces traditional pen-and-paper score sheets for the Scrabble crossword board game. Enjoy the game with your friends and family while this Scrabble Score Keeper does the math for you."),l.a.createElement("p",null,"Simply fill in the players\u2019 names in order that they will take turns and press the START button."))),l.a.createElement("div",{className:"homepage-children"},e.children),l.a.createElement("div",{className:"row rules"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("h5",null,"Features"),l.a.createElement("ul",null,l.a.createElement("li",null,"Supports official Scrabble scoring rules, including leftovers accounting"),l.a.createElement("li",null,"Shows detailed game progress"),l.a.createElement("li",null,"Supports unlimited undo"),l.a.createElement("li",null,"Restores score sheets when relaunching the app")),l.a.createElement("h5",null,"Limitations"),l.a.createElement("ul",null,l.a.createElement("li",null,"Does not validate words against the Scrabble Dictionary"),l.a.createElement("li",null,"Only supports the english language"),l.a.createElement("li",null,"Does not archive score sheets")))))},G=4,W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChangeOfName=a.handleChangeOfName.bind(Object(m.a)(a)),a.handleChangeOfLanguage=a.handleChangeOfLanguage.bind(Object(m.a)(a)),a.handleGameStart=a.handleGameStart.bind(Object(m.a)(a)),a.state={playerNames:b([],G,""),language:"en",isTagDisabled:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=(C("settings")||this.state).playerNames;e=b(e,G,""),this.setState({playerNames:e,isTagDisabled:E()})}},{key:"handleChangeOfName",value:function(e,t){var a=this.state.playerNames;(a=a.slice())[e]=t.target.value,this.setState({playerNames:a})}},{key:"handleChangeOfLanguage",value:function(e){this.setState({language:e.target.value})}},{key:"handleGameStart",value:function(e){var t=this.state,a=t.playerNames,r=t.language,l=this.props.onGameStart;e.preventDefault();a=a.map(function(e){return e.trim()}),S("settings",{playerNames:a=a.reverse().reduce(function(e,t){return t||e.length>0?[].concat(Object(p.a)(e),[t]):e},[]).reverse()}),a.length<2&&(a=b(a,2,"")),l(a.map(function(e,t){return e||"Player ".concat(t+1)}),r),n=(new Date).getTime()}},{key:"render",value:function(){var e=this,t=this.state,a=t.playerNames,n=t.isTagDisabled,r=t.language;return l.a.createElement(P,null,l.a.createElement("div",{className:"language-choice-container"},l.a.createElement("p",{className:"sel-lang"},"Select scoring language:"),l.a.createElement("select",{className:"custom-select",id:"language-select",value:r,onChange:this.handleChangeOfLanguage},l.a.createElement("option",{value:"en"},"English"),l.a.createElement("option",{value:"ru"},"Russian"),l.a.createElement("option",{value:"fr"},"French"))),l.a.createElement("form",{onSubmit:this.handleGameStart},l.a.createElement("div",{className:"player-names-choice-container"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},a.map(function(t,a){return l.a.createElement("input",{key:a,onChange:function(t){return e.handleChangeOfName(a,t)},value:t,className:"form-control player-name",placeholder:"Player ".concat(a+1),disabled:n})}))))),l.a.createElement("div",{className:"start-btn-container"},l.a.createElement("button",{className:"btn start",type:"submit",disabled:n},"START"))))}}]),t}(l.a.Component),D=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.onResume;return l.a.createElement(P,null,l.a.createElement("div",{className:"row justify-content-around"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",{className:"should-resume"},l.a.createElement("p",null,"You have a game in progress. ",l.a.createElement("br",null),"Would you like to resume it?"),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn faded",type:"button",onClick:function(){return e(!1)}},"No")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn",type:"button",onClick:function(){return e(!0)}},"Yes"))))))))}}]),t}(l.a.Component),I=a(12),x=function(){function e(t,a){Object(o.a)(this,e),this.words=t,this.bingo=a}return Object(i.a)(e,[{key:"isEmpty",value:function(){return 0===this.words.length}},{key:"isPassed",value:function(e){return this.isEmpty()&&this!==e.getCurrentTurn()}},{key:"isComplete",value:function(e){return this!==e.getCurrentTurn()}},{key:"score",get:function(){for(var e=0,t=0;t<this.words.length;t++)e+=this.words[t].score;return this.bingo&&(e+=50),e}}],[{key:"empty",value:function(){return new e([],!1)}},{key:"fromPlain",value:function(t){return new e(t.words,t.bingo)}}]),e}(),R=function(){function e(t,a,n){Object(o.a)(this,e),this.currentPlayerIndex=a,this.playersTurns=t,this.leftOversTurnNumber=n}return Object(i.a)(e,[{key:"addWord",value:function(e){var t=this.getCurrentTurn(),a=new x([].concat(Object(p.a)(t.words),[e]),t.bingo);return this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),a)}},{key:"endTurn",value:function(){var t=this;this.getCurrentTurn().isEmpty()&&(t=this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),x.empty()));var a=(this.currentPlayerIndex+1)%this.playersTurns.length;return new e(t.playersTurns.map(function(e,t){return t===a?[].concat(Object(p.a)(e),[x.empty()]):e}),a,this.leftOversTurnNumber)}},{key:"setBingo",value:function(e){var t=new x(this.getCurrentTurn().words,e);return this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),t)}},{key:"endGame",value:function(){return new e(this.playersTurns,this.currentPlayerIndex,this.getCurrentTurnNumber())}},{key:"isGameOver",value:function(){return null!==this.leftOversTurnNumber}},{key:"areLeftOversSubmitted",value:function(){return!(!this.isGameOver()||!this.playersTurns[this.playersTurns.length-1][this.leftOversTurnNumber]||0!==this.currentPlayerIndex)}},{key:"isMoveInGameOver",value:function(e){return this.isGameOver()&&e>=this.leftOversTurnNumber}},{key:"getReapers",value:function(){for(var e=[],t=0;t<this.playersTurns.length;t++)this.playersTurns[t][this.leftOversTurnNumber].isEmpty()&&e.push(t);return e}},{key:"getSumOfLeftovers",value:function(){for(var e=0,t=0;t<this.playersTurns.length;t++)e+=Math.abs(this.playersTurns[t][this.leftOversTurnNumber].score);return e}},{key:"distributeLeftOversToReapers",value:function(e,t){var a=this,n=this;return e.forEach(function(e){var r=new x([{value:"__reaped_leftovers__",modifiers:[],score:t}],!1);n=n._setTurn(e,a.leftOversTurnNumber,r)}),n}},{key:"getWinners",value:function(e){var t=this,a=this.playersTurns.map(function(a,n){return t.getTotalScore(n,e)});return function(e,t){for(var a=[],n=0;n<e.length;n++)e[n]===t&&a.push(n);return a}(a,Math.max.apply(Math,Object(p.a)(a)))}},{key:"_setTurn",value:function(t,a,n){var r=this.playersTurns[t].slice();return r[a]=n,new e(this.playersTurns.map(function(e,a){return a===t?r:e}),this.currentPlayerIndex,this.leftOversTurnNumber)}},{key:"getCurrentPlayer",value:function(){return this.playersTurns[this.currentPlayerIndex]}},{key:"getCurrentTurn",value:function(){return this.getCurrentPlayer().slice(-1)[0]}},{key:"getCurrentTurnNumber",value:function(){return this.playersTurns[0].length-1}},{key:"getCurrentPlayerIndex",value:function(){return this.currentPlayerIndex}},{key:"getRunningTotals",value:function(e){for(var t=this.playersTurns[e],a=[],n=0,r=0;r<t.length;r++)n+=t[r].score,a.push(n);return a}},{key:"getTotalScore",value:function(e,t){var a=this.getRunningTotals(e);return void 0!==t?a[t]:0===a.length?0:a[a.length-1]}}],[{key:"createNewGame",value:function(t){return new e(b([[x.empty()]],t,[]),0,null)}},{key:"fromPlain",value:function(t){return new e(t.playersTurns.map(function(e){return e.map(function(e){return x.fromPlain(e)})}),t.currentPlayerIndex,t.leftOversTurnNumber)}}]),e}();a(48);var A=function(e){var t=e.modifier,a=e.letter,n=e.score,r=e.onClick,s=t===[]?"":t.join(" ");return l.a.createElement("span",{className:"scrabble-letter ".concat(s),role:"button",onClick:r,onKeyDown:r},0!==t.length?l.a.createElement("span",{className:"tile-modifier"}):null,l.a.createElement("span",{className:"letter"},a.toUpperCase()),l.a.createElement("span",{className:"score"},n))},L=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.word,a=e.language;if("__reaped_leftovers__"===t.value)return l.a.createElement("span",{className:"reaper"},"NO LEFTOVERS");var n=t.value.split("").map(function(e,n){return l.a.createElement(A,{key:n,letter:e,modifier:t.modifiers[n],score:y(e,[[]],a)})});return l.a.createElement("div",null,n)}}]),t}(l.a.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"renderPassed",value:function(){var e=this.props,t=e.game,a=e.move;return l.a.createElement("tr",null,l.a.createElement("td",null,t.isMoveInGameOver(a)?"NO LEFTOVERS":"PASS"))}},{key:"renderNormal",value:function(){var e=this.props,t=e.turn,a=e.language,n=t.words.map(function(e,n){return l.a.createElement("tr",{key:"row-word-".concat(n),className:"word-row"},l.a.createElement("td",{className:"word-cell"},l.a.createElement(L,{word:e,language:a})),0===n?l.a.createElement("td",{rowSpan:"".concat(t.bingo?t.words.length+1:t.words.length),className:"score-cell"},l.a.createElement("span",{className:"score-box"},t.score)):null)});return t.bingo&&n.push(l.a.createElement("tr",{key:"bingo"},l.a.createElement("td",{colSpan:"2"},"BINGO!"))),n}},{key:"render",value:function(){var e=this.props,t=e.turn,a=e.game;return l.a.createElement("table",{className:"score-grid-cell"},l.a.createElement("tbody",null,t.isPassed(a)?this.renderPassed():this.renderNormal()))}}]),t}(l.a.Component);a(24);var M=function(e){var t=e.playerNames,a=e.game,n=e.language,r=a.isGameOver()?a.leftOversTurnNumber+1:a.getCurrentTurnNumber()+1;return l.a.createElement("table",{className:"table table-bordered score-grid-table",align:"center"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"thead-rows"},l.a.createElement("th",{className:"move-header"},"Move"),t.map(function(e,t){return l.a.createElement("th",{key:t,className:"player-header"},e)}))),l.a.createElement("tbody",{className:"tbody-rows"},Object(p.a)(Array(r)).map(function(e,t){return l.a.createElement("tr",{className:"turn-row",key:t},l.a.createElement("th",{className:"move-number"},t+1),a.playersTurns.map(function(e,r){return l.a.createElement("td",{key:r,className:(s=e[t],o=a.getCurrentTurn(),s===o?"player-turn active":"player-turn")},e[t]?l.a.createElement(U,{turn:e[t],move:t,language:n,game:a}):null);var s,o}))}),l.a.createElement("tr",{className:"total-score"},l.a.createElement("th",{className:"move"},"TOTAL"),t.map(function(e,t){return l.a.createElement("td",{key:t},a.getTotalScore(t))}))))};var _=function(e){var t=e.isMobile,a=e.game,n=e.playerNames;return l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("span",{className:"call-player-to-action"},function(){var e=n[a.currentPlayerIndex];return{"mobile-ingame":"Submit a word or pass","mobile-gameover":"Submit your leftovers","desktop-ingame":"".concat(e,", submit a word or pass"),"desktop-gameover":"".concat(e,", submit your leftovers")}["".concat(t?"mobile":"desktop","-").concat(a.isGameOver()?"gameover":"ingame")]}()))},B=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"moveRowText",value:function(e){return this.props.game.isMoveInGameOver(e)?"Leftovers Accounting":"Move ".concat(e+1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.playerNames,n=t.game,r=t.language,s=Object(p.a)(Array(a.length)).map(function(e,t){return n.getRunningTotals(t)}),o=n.isGameOver()?n.leftOversTurnNumber+1:n.getCurrentTurnNumber()+1;return l.a.createElement("table",{className:"table table-bordered score-grid-table"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"thead-rows"},l.a.createElement("th",{className:"playerNames",scope:"col"},"Names",l.a.createElement("br",null),"(Total)"),l.a.createElement("th",{className:"playerTurn",scope:"col"},"Player Turn"))),l.a.createElement("tbody",{key:"tbody",className:"tbody-rows"},Object(p.a)(Array(o)).map(function(t,o){return[l.a.createElement("tr",{key:"moverow".concat(o),className:"move-row"},l.a.createElement("td",{colSpan:"2"},e.moveRowText(o))),n.playersTurns.map(function(e,t){return e[o]?l.a.createElement("tr",{key:"move".concat(o,"_player").concat(t),className:"player-move-row"},l.a.createElement("td",{className:"player-name"},a[t],l.a.createElement("br",null),(i=e[o],n.areLeftOversSubmitted()||i.isComplete(n)?s[t][o]:null)),l.a.createElement("td",{className:"player-turn"},function(e,t){return e===n.getCurrentPlayer()&&e[t].isEmpty()&&!e[t].isPassed(n)&&!e[t].bingo}(e,o)?l.a.createElement("table",{className:"score-grid-cell"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(_,{game:n,playerNames:a,isMobile:!0}))))):l.a.createElement(U,{turn:e[o],move:o,language:r,game:n}))):null;var i})]})))}}]),t}(l.a.Component),F=a(32),z=a(31),V=(a(49),a(50),function(e){var t=e.children,a=e.tooltip,n=e.hideArrow,r=Object(F.a)(e,["children","tooltip","hideArrow"]);return l.a.createElement(z.a,Object.assign({},r,{tooltip:function(e){var t=e.arrowRef,r=e.tooltipRef,s=e.getArrowProps,o=e.getTooltipProps,i=e.placement;return l.a.createElement("div",o({ref:r,className:"tooltip-container"}),!n&&l.a.createElement("div",s({ref:t,className:"tooltip-arrow","data-placement":i})),a)}}),function(e){var a=e.getTriggerProps,n=e.triggerRef;return l.a.createElement("span",a({ref:n,className:"trigger"}),t)})}),H=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"tileText",value:function(){switch(this.props.modifier){case"double-letter":return"Double letter score";case"double-word":return"Double word score";case"triple-letter":return"Triple letter score";case"triple-word":return"Triple word score";case"blank":return"Blank tile";default:return null}}},{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.modifier;return l.a.createElement("span",{role:"button",onClick:function(e){return t(a,e)},onKeyDown:function(e){return t(a,e)},onTouchEnd:function(e){return t(a,e)},className:"modifier ".concat(a)},this.tileText())}}]),t}(l.a.Component),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(m.a)(a)),a.handleVisibilityChange=a.handleVisibilityChange.bind(Object(m.a)(a)),a.state={modifiers:[],tooltipShown:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e,t){var a=this.state.modifiers,n=this.props.onChange,r=function(e,t){var a=e.filter(function(e){return"blank"===e}),n=e.filter(function(e){return"blank"!==e});return"blank"===t?a=v(a,t):n=v(n,t),[].concat(Object(p.a)(a),Object(p.a)(n))}(a,e);this.setState({modifiers:r,tooltipShown:!1}),n(r),t.preventDefault(),t.stopPropagation()}},{key:"handleVisibilityChange",value:function(e){this.setState({tooltipShown:e})}},{key:"render",value:function(){var e=this.state.tooltipShown,t=this.props.children;return l.a.createElement(V,{onVisibilityChange:this.handleVisibilityChange,tooltipShown:e,placement:"bottom",trigger:"click",portalContainer:document.getElementsByClassName("scrabble-input-box")[0],tooltip:l.a.createElement("div",null,l.a.createElement("div",{className:"modifier-buttons"},l.a.createElement(H,{modifier:"double-letter",onClick:this.handleClick}),l.a.createElement(H,{modifier:"double-word",onClick:this.handleClick}),l.a.createElement(H,{modifier:"triple-letter",onClick:this.handleClick}),l.a.createElement(H,{modifier:"triple-word",onClick:this.handleClick}),l.a.createElement(H,{modifier:"blank",onClick:this.handleClick})),l.a.createElement("span",{className:"star-hint"},"\u2191 Press on the star"))},t)}}]),t}(l.a.Component),J=(a(53),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).textHiddenInput=l.a.createRef(),a.focus=a.focus.bind(Object(m.a)(a)),a.handleHiddenInputChange=a.handleHiddenInputChange.bind(Object(m.a)(a)),a.handleTileClick=a.handleTileClick.bind(Object(m.a)(a)),a.state={inFocus:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleHiddenInputChange",value:function(e){var t=this.props,a=t.language,n=t.word,r=t.onChange,l=e.target.value.substring(0,15).split("").map(function(e){return function(e,t){return e.toLowerCase()in f[t].scores}(e,a)?e:""}),s=b(n.modifiers,l.length,[]);r({value:l.join(""),modifiers:s})}},{key:"handleModifierChange",value:function(e,t){var a=this.props,n=a.word,r=a.onChange,l=n.modifiers.slice();l[e]=t,r({value:n.value,modifiers:l}),w("add-modifier",{letterIndex:e,modifier:t.join()})}},{key:"handleTileClick",value:function(){this.focus()}},{key:"focus",value:function(){this.textHiddenInput.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.language,n=t.word,r=this.state.inFocus;return l.a.createElement("div",{role:"textbox",onClick:this.focus,onKeyDown:this.focus,className:"scrabble-input-box".concat(n.value.length>8?" large":"")},l.a.createElement("input",{ref:this.textHiddenInput,onChange:this.handleHiddenInputChange,onKeyDown:function(e){return function(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||e.preventDefault()}(e)},value:n.value,className:"hidden-input",onBlur:function(){return e.setState({inFocus:!1})},onFocus:function(){return e.setState({inFocus:!0})},type:"text",maxLength:"15",autoComplete:"off",autoCapitalize:"off",spellCheck:"false",autoCorrect:"off"}),l.a.createElement("div",{className:r?"scrabble-tiles blinker":"scrabble-tiles"},n.value.split("").map(function(t,r){return l.a.createElement(K,{onChange:function(t){return e.handleModifierChange(r,t)},key:r},l.a.createElement(A,{onClick:e.handleTileClick,letter:t,score:y(t,[[]],a),modifier:n.modifiers[r]}))})))}}]),t}(l.a.Component)),q=a(30),Y=a.n(q);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Q,X={value:"",modifiers:[],score:0};navigator.userAgent.includes("cordova")||(Q=new Y.a);var Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleUndo=a.handleUndo.bind(Object(m.a)(a)),a.handleEndTurn=a.handleEndTurn.bind(Object(m.a)(a)),a.handleEndGame=a.handleEndGame.bind(Object(m.a)(a)),a.handleAddWord=a.handleAddWord.bind(Object(m.a)(a)),a.handleBingo=a.handleBingo.bind(Object(m.a)(a)),a._scroll=a._scroll.bind(Object(m.a)(a)),a.input=l.a.createRef(),a.state={currentWord:X},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"_scroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"middle",t=this.props.isMobile;"undefined"!==typeof Q&&Q.enable(),t&&("middle"===e?j():k())}},{key:"componentDidMount",value:function(){var e=this.props.game;this.input.current&&this.input.current.focus(),0===e.getCurrentTurnNumber()&&this._scroll("top")}},{key:"onSetGame",value:function(e){var t=this.props.onSetGame;t(e),this.resetCurrentWord()}},{key:"resetCurrentWord",value:function(){this.setState({currentWord:X}),this.input.current&&this.input.current.focus()}},{key:"handleChange",value:function(e){var t=this.props.language,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{score:y(e.value,e.modifiers,t)});this.setState({currentWord:a})}},{key:"handleUndo",value:function(){(0,this.props.onUndo)(),this.resetCurrentWord(),w("undo")}},{key:"handleAddWord",value:function(){var e=this.state.currentWord,t=this.props.game;this.onSetGame(t.addWord(e)),this._scroll(),w("add-word",{word:O(this.state.currentWord)})}},{key:"handleEndTurn",value:function(e){var t=this.state.currentWord,a=this.props.game;0!==t.value.length&&(a=a.addWord(t)),this.onSetGame(a.endTurn()),this._scroll(),w("end-turn",0!==t.value.length?{word:O(this.state.currentWord)}:{passed:!0})}},{key:"handleBingo",value:function(){var e=this.props,t=e.game;(0,e.onSetGame)(t.setBingo(!t.getCurrentTurn().bingo)),this._scroll(),this.input.current.focus(),w("toggle-bingo")}},{key:"handleEndGame",value:function(){var e=this.props,t=e.game;(0,e.onSetGame)(t.endGame()),this._scroll(),w("end-game",N(t))}},{key:"render",value:function(){var e=this.state.currentWord,t=this.props,a=t.game,n=t.language,r=t.undoDisabled,s=a.getCurrentTurn().isEmpty()&&""===e.value,o=s?"PASS":"END TURN",i=0!==a.currentPlayerIndex||""!==e.value||a.getCurrentTurn().score>0||1===a.playersTurns[a.getCurrentPlayerIndex()].length,c=![].concat(Object(p.a)(a.getCurrentTurn().words),[e]).some(function(e){return e.value.length>=7}),u=e.modifiers.some(function(e){return 0!==e.length}),m=0===a.getCurrentTurnNumber()&&0===a.getCurrentPlayerIndex()&&!u&&""!==e.value,d=0===a.getCurrentTurnNumber()&&0===a.getCurrentPlayerIndex(),h=!u&&!s&&d,g={ref:this.input,onChange:this.handleChange,word:e,language:n};return l.a.createElement("form",{className:d?"first-turn":null,onSubmit:function(e){return e.preventDefault()}},l.a.createElement(J,g),l.a.createElement("div",{className:"instruction-message ".concat(m?"":"hide")},"\u2191 Press on a letter"),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleEndTurn,type:"submit",className:"btn",disabled:h},o))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleAddWord,type:"button",className:"btn middle-scroll-anchor",disabled:""===e.value||d},"+ ADD A WORD")),l.a.createElement("div",{className:"col"},l.a.createElement("input",{onChange:this.handleBingo,type:"checkbox",id:"bingoToggle",checked:a.getCurrentTurn().bingo,disabled:c}),l.a.createElement("label",{className:"btn bingo ".concat(c?"disabled":""),htmlFor:"bingoToggle"},"BINGO"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleEndGame,type:"button",className:"btn",disabled:i},"END GAME")))))}}]),t}(l.a.Component);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var te={value:"",modifiers:[],score:0},ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleUndo=a.handleUndo.bind(Object(m.a)(a)),a.handleLeftOvers=a.handleLeftOvers.bind(Object(m.a)(a)),a.handleNewGame=a.handleNewGame.bind(Object(m.a)(a)),a.input=l.a.createRef(),a.state={currentWord:te},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.input.current&&this.input.current.focus()}},{key:"resetCurrentWord",value:function(){this.setState({currentWord:te}),this.input.current&&this.input.current.focus()}},{key:"handleUndo",value:function(){(0,this.props.onUndo)(),this.resetCurrentWord(),w("undo")}},{key:"handleChange",value:function(e){var t=this.props.language,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{score:-y(e.value,e.modifiers,t)});this.setState({currentWord:a})}},{key:"handleNewGame",value:function(){(0,this.props.onNewGame)({reset:!0}),w("new-game")}},{key:"handleLeftOvers",value:function(e){var t=this.state.currentWord,a=this.props.onSetGame,n=this.props.game;e.preventDefault(),0!==t.value.length&&(n=n.addWord(t)),0===(n=n.endTurn()).currentPlayerIndex&&(n=n.distributeLeftOversToReapers(n.getReapers(),n.getSumOfLeftovers())),a(n),this.resetCurrentWord(),w("submit-leftovers",0!==t.value.length?{leftovers:t.value}:{leftovers:"No leftovers submitted"})}},{key:"render",value:function(){var e=this.state.currentWord,t=this.props,a=t.game,n=t.language,r=t.undoDisabled,s=e.value.length>0?"SUBMIT LEFTOVERS":"SUBMIT NO LEFTOVERS";return l.a.createElement("div",null,a.areLeftOversSubmitted()?l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleNewGame,type:"button",className:"btn"},"NEW GAME"))),l.a.createElement("div",{className:"rate-me"},l.a.createElement("div",{className:"row apple"},l.a.createElement("div",{className:"col"},l.a.createElement("a",{className:"btn app-store-rating",href:"https://apps.apple.com/us/app/scrabble-score-calculator/id1497216063",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")," RATE US ON THE APP STORE ",l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")))),l.a.createElement("div",{className:"row playmarket"},l.a.createElement("div",{className:"col"},l.a.createElement("a",{className:"btn android-rating",href:"https://play.google.com/store/apps/details?id=com.saintmarina.scrabblescore",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")," RATE US ON PLAY STORE ",l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO")))):l.a.createElement("form",{autoComplete:"off"},l.a.createElement(J,{ref:this.input,onChange:this.handleChange,word:e,language:n}),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleLeftOvers,type:"submit",className:"btn"},s))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO"))))))}}]),t}(l.a.Component);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var le=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleUndo=a.handleUndo.bind(Object(m.a)(a)),a.handleSetGame=a.handleSetGame.bind(Object(m.a)(a)),a.renderWinner=a.renderWinner.bind(Object(m.a)(a));var n=a.props.playerNames,r=C("gameState");return a.state=r?{game:R.fromPlain(r.game),games:r.games.map(R.fromPlain)}:{game:R.createNewGame(n.length),games:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSetGame",value:function(e){var t=this.state,a=t.game,n=t.games,r=this.props.playerNames,l={game:e,games:[].concat(Object(p.a)(n.slice()),[a])};this.setState(l),S("gameState",re({playerNames:r},l))}},{key:"handleUndo",value:function(){var e=this.state.games,t=this.props.playerNames,a=e.slice(0,-1),n={game:e[e.length-1],games:a};this.setState(n),S("gameState",re({playerNames:t},n))}},{key:"renderWinner",value:function(){var e=this.state.game,t=this.props.playerNames,a=e.leftOversTurnNumber-1,n=e.getWinners();if(n.length>1){var r=e.getWinners(a);return r.map(function(n){return r.length>1?"".concat(t[n],": ").concat(e.getTotalScore(n,a)," points"):"".concat(t[n]," won with ").concat(e.getTotalScore(n,a)," points!")}).join(", ")}return"".concat(t[n[0]]," won with ").concat(e.getTotalScore(n[0])," points!")}},{key:"render",value:function(){var e=this.state,t=e.game,a=e.games,n=this.props,r=n.playerNames,s=n.language,o=n.isMobile,i=n.onNewGame,c={onSetGame:this.handleSetGame,onUndo:this.handleUndo,undoDisabled:0===a.length,onNewGame:i,isMobile:o,game:t,language:s};return l.a.createElement("div",{className:"score-keeper"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:"small-logo",onClick:i},l.a.createElement("img",{src:"logo.png",alt:"Scrabble score logo"})),l.a.createElement("h1",{className:"title"},"Score Sheet"),o?l.a.createElement(B,{playerNames:r,game:t,language:s}):l.a.createElement(M,{playerNames:r,game:t,language:s}),t.areLeftOversSubmitted()?l.a.createElement("div",{className:"winner"},l.a.createElement("h1",null,this.renderWinner())):function(){if(!o)return l.a.createElement(_,{game:t,playerNames:r,isMobile:o})}(),t.isGameOver()?l.a.createElement(ae,c):l.a.createElement(Z,c),l.a.createElement("h3",{className:"instructions"},"Instructions"),l.a.createElement("ul",null,l.a.createElement("li",null,"To submit a word, type the word in the input box (the white rectangle above the buttons) then press END TURN."),l.a.createElement("li",null,"When scoring a word with a tile on a prime square (e.g., double-word), press on the coresponding tile in the input box then choose a corresponding option from the window."),l.a.createElement("li",null,"If you made a mistake, you may use unlimited UNDO."),l.a.createElement("li",null,"When scoring multiple words, use ADD WORD."),l.a.createElement("li",null,"When a player uses all seven tiles in a single turn, press BINGO. This adds a 50 points bonus."),l.a.createElement("li",null,"When using a BLANK tile, press on the corresponding tile and mark it as such."),l.a.createElement("li",null,"When all the players completed their last turn, press END GAME. Players are then asked to enter their leftover tiles. Players with leftover tiles get their leftover points deducted from their score. Players with no leftovers tiles collect the leftover points of other players."),l.a.createElement("li",null,"To start a new game, press on the logo at the top of the page."))))}}]),t}(l.a.Component),se=(a(57),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleGameStart=a.handleGameStart.bind(Object(m.a)(a)),a.handleWindowSizeChange=a.handleWindowSizeChange.bind(Object(m.a)(a)),a.handlePopState=a.handlePopState.bind(Object(m.a)(a)),a.handleResetGame=a.handleResetGame.bind(Object(m.a)(a)),a.state={resumeState:null,playerNames:[],language:"en",width:10},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.playerNames;window.history.pushState({playerNames:e},null),window.addEventListener("popstate",this.handlePopState),h.a.initialize("UA-144533310-1"),h.a.pageview(window.location.pathname+window.location.search),this.handleWindowSizeChange();var t=C("gameState");this.setState({resumeState:t})}},{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowSizeChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSizeChange),window.removeEventListener("popstate",this.handlePopState)}},{key:"handlePopState",value:function(e){var t=e.state;this.setState({playerNames:t.playerNames})}},{key:"handleWindowSizeChange",value:function(){this.setState({width:window.innerWidth})}},{key:"handleGameStart",value:function(e,t){w("start-game",{"player-names":e,language:t,"num-players":e.length}),window.history.pushState({playerNames:e},null),this.setState({playerNames:e,language:t})}},{key:"handleResetGame",value:function(e){e.reset&&T("gameState");var t=C("gameState");this.setState({resumeState:t}),this.setState({playerNames:[]})}},{key:"renderGame",value:function(e){var t=this,a=this.state,n=a.resumeState,r=a.playerNames,s=a.language;if(n){return l.a.createElement(D,{onResume:function(e){e?t.setState({playerNames:n.playerNames}):T("gameState"),t.setState({resumeState:null}),w("game-resume",{resume:e})}})}return 0===r.length?l.a.createElement(W,{onGameStart:this.handleGameStart}):l.a.createElement(le,{onNewGame:this.handleResetGame,playerNames:r,language:s,isMobile:e})}},{key:"render",value:function(){var e=this.state.width<=815;return l.a.createElement("div",{className:"main ".concat(e?"mobile":"desktop")},this.renderGame(e))}}]),t}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.getInstance().init("908142045794995ec39e6025a04bfdb4");var oe=document.getElementsByClassName("content")[0];oe.hasChildNodes()?Object(s.hydrate)(l.a.createElement(se,null),oe):Object(s.render)(l.a.createElement(se,null),oe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.b807ea1e.chunk.js.map